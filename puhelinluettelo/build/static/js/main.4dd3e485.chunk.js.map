{"version":3,"sources":["Components/Person.js","Components/Persons.js","Components/FilterForm.js","Components/NewPersonForm.js","services/personService.js","Components/Notification.js","App.js","index.js"],"names":["Person","person","deletePerson","name","number","onClick","Persons","persons","personsToShow","filter","show","map","id","FilterForm","filterText","handleFilterChange","value","onChange","NewPersonForm","addNewPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","baseUrl","exportedObject","getAll","axios","get","then","response","data","create","newObject","post","update","console","log","put","delete","Notification","message","notificationType","className","App","useState","setPersons","setNewName","setNewNumber","setFilterText","notificationMessage","setNotificationMessage","setNotificationType","useEffect","personService","showNotification","setTimeout","event","preventDefault","find","persID","p","window","confirm","updatedPersonObject","catch","error","handlePersonUpdate","target","reset","personObject","Math","floor","random","input","toLowerCase","includes","personToDelete","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4dd3e485.chunk.js","sourcesContent":["import React from 'react'\nconst Person = ({person, deletePerson}) =>  {\n    return(\n       <p>{person.name} - {person.number} <button onClick={deletePerson}>Poista</button></p> \n    )\n}\n\nexport default Person","import React from 'react'\nimport Person from './Person'\n\n\nconst Persons = ( {persons, deletePerson} ) => {\n  \n    const personsToShow = persons.filter(person => person.show)\n    \n    const rows = () => personsToShow.map(person =>\n      <li key ={person.name}><Person person={person} deletePerson = {() => deletePerson(person.id)}/></li>)\n    return (\n        <div>\n          {rows()}\n        </div>\n    )\n  }\n  export default Persons","import React from 'react'\n\nconst FilterForm = ( {filterText, handleFilterChange} ) =>  {\n    return(\n        <p>Filter names with <input value ={filterText} onChange={handleFilterChange}/></p>\n)\n}\nexport default FilterForm","import React from 'react'\n\n\nconst NewPersonForm = ({addNewPerson, newName, handleNameChange, newNumber, handleNumberChange}) =>  {\n    return(\n        <form onSubmit={addNewPerson}>\n            <div>\n                <p>\n                    name: <input\n                    name = {newName}\n                    onChange={handleNameChange}/>\n                </p>\n            </div>\n            <div> \n                <p>\n                    number: <input\n                    number = {newNumber}\n                    onChange = {handleNumberChange}/>\n                </p>\n            </div>\n            <button type=\"submit\">add</button>\n        </form>\n    )\n}\n\n\nexport default NewPersonForm","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\n  const create = newObject => {\n    return axios.post(baseUrl, newObject)\n  }\n  \n  const update = (id, newObject) => {\n    console.log('service here \\n you called \\n update Person method for id ' , newObject)\n    return axios.put(`${baseUrl}/${id}`, newObject)\n  }\n  \n  const deletePerson = (id) => {\n    console.log('service here \\n you called \\n deletePerson method for id ' , id )\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n    \n  }\n\n  const exportedObject = { getAll, create, update, deletePerson }\n  export default exportedObject\n\n\n","import React from 'react'\nconst Notification = ({message, notificationType}) => {\n    if (message === null) {   \n      return null\n    }\n    return (\n    <div className={notificationType} > \n      <p>{message}</p>\n    </div>)\n  }\n\n\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport Persons from './Components/Persons'\nimport FilterForm from './Components/FilterForm'\nimport NewPersonForm from './Components/NewPersonForm'\nimport personService from './services/personService'\nimport Notification from './Components/Notification'\nimport './index.css'\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filterText, setFilterText ] = useState('')\n  const [ notificationMessage, setNotificationMessage ] = useState('')\n  const [ notificationType, setNotificationType ] = useState('')\n\n  useEffect(() => {\n    personService\n    .getAll()\n    .then(response => {\n      setPersons(response) \n    })\n  }, [])\n\n  const createInteger = () => {\n      return Math.floor(Math.random() * 100000);\n  }\n \n  const showNotification = () => {\n    console.log('Klick')\n    setTimeout(() => {\n      setNotificationMessage(null)\n      setNotificationType(null)\n    }, 5000)\n  }\n\n  const handlePersonUpdate = (id) => {\n    if (window.confirm(`${newName} is already added to phonebook. Update phone number?`)) {\n      const updatedPersonObject = {\n        id: id,\n        name: newName,\n        number: newNumber\n      }\n      personService.update(id, updatedPersonObject)\n        .then(response => {\n        setPersons(persons.map(person => person.id !== id ? person : response.data))\n        setNotificationMessage(`${newName} updated!`)\n        setNotificationType('success')\n      }).catch(error => {\n        setNotificationMessage(`${newName} already removed from server!`)\n        setNotificationType('error')\n      })\n      showNotification()\n    }\n  }\n\n  const addNewPerson = ( event ) => {\n    event.preventDefault()\n    if (persons.find(person => (person.name === newName))) {\n      const persID = persons.find(p => p.name === newName).id\n      console.log('AddNewPerson persID.id', persID)\n      handlePersonUpdate(persID) // find persons id\n      event.target.reset()\n    } else {\n      const newId = createInteger()\n    const personObject = {\n        id: newId,\n        name: newName,\n        number: newNumber\n      }\n      personService.create(personObject)\n      .then(response => {\n        console.log(\"Logging pers object\" , personObject)\n        console.log('Logging db', persons.find(p => p.name === newName))\n        setNotificationMessage(`${newName} added!`)\n        setNotificationType('success')\n        setPersons([...persons, personObject])\n      }).catch(error => {       \n        console.log('THIS IS THE ERROR:')\n        console.log(error.response)\n        setNotificationMessage(error.response.data)\n        setNotificationType('error') \n    })\n    event.target.reset()\n    showNotification()\n    }\n  }\n  const deletePerson = (id) => {\n    const personToDelete = persons.find(p => p.id === id)\n    console.log('Person to delete', personToDelete, 'id', personToDelete.id)\n    if (window.confirm(`Delete contacts for ${personToDelete.name}?`)) {\n    personService.deletePerson(id)\n    .then(response=> {\n      setPersons(persons.filter(p => id !== p.id))\n      setNotificationMessage(`${personToDelete.name} deleted!`)\n      setNotificationType('success')\n      showNotification()\n    })\n    .catch(error => {\n      setNotificationMessage(`${personToDelete.name} already removed from server!`)\n      setNotificationType('error')\n    })\n    showNotification()\n  }\n}\n\n  const handleNameChange = ( event ) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    event.preventDefault()\n    setFilterText(event.target.value)\n    persons.filter(p => !p.name.toLowerCase().includes(event.target.value.toLowerCase()))\n      .map(p => p.show = false)\n    persons.filter(p => p.name.toLowerCase().includes(event.target.value.toLowerCase()))\n      .map(p => p.show = true)  \n  }\n\n  return (\n    \n  <div>\n    <h2>Phonebook</h2>\n        \n    <NewPersonForm\n      addNewPerson = {addNewPerson}         \n      handleNameChange={handleNameChange} \n      handleNumberChange = {handleNumberChange}\n      newNumber = {newNumber} \n      newName = {newName}\n    /> \n   \n    <Notification message = {notificationMessage} notificationType = {notificationType} />\n    <FilterForm input={filterText} handleFilterChange={handleFilterChange} /> \n    \n    <div>\n      <h2>Numbers</h2>\n        <ul>\n          <Persons persons = {persons} deletePerson ={deletePerson} />\n        </ul>\n    </div>\n    </div>\n  )\n}\n\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}